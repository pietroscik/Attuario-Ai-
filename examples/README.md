# Examples - Attuario AI

This directory contains sample HTML pages and their expected output to demonstrate the capabilities of the Attuario AI evaluation pipeline.

## Sample Pages

### `sample_page_1.html` - Excellent Quality (Score: 88.5)
**Topic:** Valutazione del Risk Margin secondo Solvency II

High-quality actuarial content featuring:
- Comprehensive technical terminology (solvency, SCR, BSCR, Risk Margin)
- Detailed mathematical formulas and calculations
- Complete numerical examples with tables
- Multiple regulatory citations (IVASS, EIOPA, Solvency II directives)
- Recent publication and modification dates
- Well-structured content with clear sections

**Key Metrics:**
- 565 words
- 8 different actuarial terms (92 total occurrences)
- 22 regulatory citations
- Contains formulas, tables, and lists
- Fresh content (2024)

### `sample_page_2.html` - Good Quality (Score: 83.96)
**Topic:** Best Estimate e Riserve Tecniche

Good actuarial content with:
- Solid technical terminology (Best Estimate, Risk Margin, Solvency II)
- Mathematical formulas for calculating reserves
- Numerical examples with a comparison table
- Regulatory references (IVASS, EIOPA)
- Moderate freshness (2023)

**Key Metrics:**
- 282 words
- 7 different actuarial terms (21 total occurrences)
- 9 regulatory citations
- Contains formulas, tables, and lists
- Slightly older content (2023)

### `sample_page_3.html` - Basic Quality (Score: 71.68)
**Topic:** Introduzione all'Assicurazione Vita

Basic actuarial content featuring:
- Limited technical terminology (premio, riserva matematica, Solvency II, IVASS)
- Basic numerical examples (no formulas or tables)
- Minimal regulatory citations
- No publication date information
- General overview without deep technical detail

**Key Metrics:**
- 235 words
- 6 different actuarial terms (2 total occurrences)
- 4 regulatory citations
- No formulas or tables, only lists
- No freshness information

## Expected Output

The `expected_output.json` file contains the complete output generated by running the Attuario AI pipeline on these three sample pages. The output includes:

- **Page information**: URL, title, and metadata (author, publication dates, description)
- **Extracted metrics**: word count, actuarial terms, numeric tokens, structural elements
- **Quality scores**: composite score and individual component scores (accuracy, transparency, completeness, freshness, clarity)
- **Classification**: quality category (Eccellente, Buono, Discreto, or Criticit√†)

## Usage

You can test the pipeline with these examples:

```bash
# Test a single example file
python scripts/run_pipeline.py file:///path/to/examples/sample_page_1.html --max-pages 1

# Parse and analyze programmatically
python -c "
from attuario_ai import PageParser, extract_metrics, score_page, ScoreWeights
from pathlib import Path

html = Path('examples/sample_page_1.html').read_text()
parser = PageParser()
parsed = parser.parse('https://example.com', html, 0)
metrics = extract_metrics(parsed.text, html)
score = score_page(metrics, parsed.metadata, ScoreWeights())
print(f'Score: {score.composite:.1f} - {score.classification}')
"
```

## Verification

To verify that the pipeline produces consistent results with the expected output:

```python
import json
from pathlib import Path
from attuario_ai import PageParser, extract_metrics, score_page, ScoreWeights

# Load expected output
expected = json.loads(Path('examples/expected_output.json').read_text())

# Run pipeline on sample pages
parser = PageParser()
weights = ScoreWeights()

for i, sample in enumerate([1, 2, 3], 1):
    html = Path(f'examples/sample_page_{i}.html').read_text()
    parsed = parser.parse(f'https://www.attuario.eu/example-{i}', html, 0)
    metrics = extract_metrics(parsed.text, html)
    score = score_page(metrics, parsed.metadata, weights)
    
    print(f"Sample {i}: {score.composite:.1f} (expected: {expected[i-1]['score']['composite']})")
```
